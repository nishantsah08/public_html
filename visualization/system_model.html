

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Best PG in Dighi - 3D System Model</title>
    <style>
        body { margin: 0; background-color: #000011; color: white; font-family: sans-serif; }
        #info-box {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #555;
            display: none;
            max-width: 300px;
        }
        h2 { margin-top: 0; color: #4fc3f7; }
        p { margin-bottom: 5px; }
        strong { color: #ffeb3b; }
    </style>
</head>
<body>

<div id="3d-graph"></div>
<div id="info-box"></div>

<script src="https://unpkg.com/3d-force-graph@1.70.5/dist/3d-force-graph.min.js"></script>

<script>
    const graphData = {
        nodes: [
            // Core Governance
            { id: 'Constitution', name: 'ðŸ“œ Constitution', group: 1, description: 'The \'Why\': Core mission, values, and goals.' },
            { id: 'Parliament', name: 'ðŸ›ï¸ Parliament', group: 1, description: 'The \'What\': Defines enforceable business policies (acts).', details: 'Responsible for ratifying bills into acts.' },
            { id: 'Judiciary', name: 'âš–ï¸ Judiciary', group: 1, description: 'The \'Arbiter\': Resolves errors and disputes.', details: 'Reviews cases and provides verdicts. Handles CEO approvals for high-value cases.' },

            // Human Interfaces
            { id: 'CEO', name: 'ðŸ‘¤ CEO/Owner', group: 2, description: 'The ultimate authority and user of the system.' },
            { id: 'InternalPortal', name: 'ðŸ”’ Internal System Portal', group: 2, description: 'Web-based command center for the CEO.' },
            { id: 'MobileApps', name: 'ðŸ“± Mobile App Suite', group: 2, description: 'Role-specific apps for Sales and Caretaker.' },
            { id: 'PublicWebsite', name: 'ðŸŒ Public Website', group: 2, description: 'Passive SEO asset and information source.' },
            { id: 'WhatsAppAPI', name: 'ðŸ’¬ WhatsApp Business API', group: 2, description: 'External entry point for financial messages.' },

            // Executive AI Agents
            { id: 'FinancialAI', name: 'ðŸ’° Financial AI Agent', group: 3, description: 'Processes financial transactions from WhatsApp.', details: 'TRIGGERS the entire Tenant Onboarding workflow.' },
            { id: 'VerificationAI', name: 'ðŸ“„ Verification AI', group: 3, description: 'Autonomously verifies tenant documents.' },
            { id: 'SalesAI', name: 'ðŸ“ˆ Sales AI Agent', group: 3, description: 'Handles escalations and manual sales tasks.' },
            { id: 'CaretakerAI', name: 'ðŸ› ï¸ Caretaker AI Agent', group: 3, description: 'Receives notifications to assign beds.' },

            // MCP Services (The Work)
            { id: 'WebhookService', name: 'ðŸ”Œ WhatsApp Webhook', group: 4, description: 'The \'Front Door\'. Receives messages from the WhatsApp API.', failure: 'This component is not yet built.' },
            { id: 'TenantService', name: 'ðŸ‘¤ Tenant Mgmt Service', group: 4, description: 'Manages tenant records (provisional, verified, etc.).', failure: 'This component is not yet built.' },
            { id: 'NotificationService', name: 'ðŸ”” Notification Service', group: 4, description: 'Sends automated SMS, WhatsApp, and audio messages.', failure: 'This component is not yet built.' },
            { id: 'PolicyEngine', name: 'ðŸ“– Policy Engine', group: 4, description: 'The \'Rulebook Reader\'. Allows AIs to understand and apply YAML policies.', failure: 'This component is not yet built.' },

            // Core Datastore
            { id: 'FirestoreDB', name: 'ðŸ—„ï¸ Firebase Firestore', group: 5, description: 'The \'Notebook\'. The central database for all system state.', failure: 'This component is not yet built.' },

            // Key Documents
            { id: 'Acts', name: 'ðŸ“œ Acts (YAML)', group: 6, description: 'The ratified, machine-readable rulebooks.' },
        ],
        links: [
            // CEO & Interfaces
            { source: 'CEO', target: 'InternalPortal' },
            { source: 'CEO', target: 'MobileApps' },
            { source: 'InternalPortal', target: 'Judiciary', name: 'Approves Verdicts' },

            // Onboarding Flow (Z-Axis)
            { source: 'WhatsAppAPI', target: 'WebhookService', name: '-> 1. Receives Msg' },
            { source: 'WebhookService', target: 'FinancialAI', name: '-> 2. Triggers AI' },
            { source: 'FinancialAI', target: 'TenantService', name: '-> 3. Creates Provisional Tenant' },
            { source: 'TenantService', target: 'NotificationService', name: '-> 4. Sends Form Link' },
            { source: 'NotificationService', target: 'VerificationAI', name: '-> 5. Triggers Verification' },
            { source: 'VerificationAI', target: 'NotificationService', name: '-> 6. Sends Final Audio Msg' },
            { source: 'NotificationService', target: 'CaretakerAI', name: '-> 7. Authorizes Bed Assignment' },

            // Data & Policy Dependencies
            { source: 'TenantService', target: 'FirestoreDB', name: 'Stores Data' },
            { source: 'Judiciary', target: 'FirestoreDB', name: 'Stores Dockets' },
            { source: 'Judiciary', target: 'Acts', name: 'Reads Rules' },
            { source: 'FinancialAI', target: 'Acts', name: 'Reads Rules' },
            { source: 'Acts', target: 'PolicyEngine', name: 'Interpreted By' },
            { source: 'PolicyEngine', target: 'Judiciary' },
            { source: 'PolicyEngine', target: 'FinancialAI' },

            // Governance
            { source: 'Parliament', target: 'Acts' },
            { source: 'Constitution', target: 'Parliament' },
            { source: 'Constitution', target: 'Judiciary' },

            // Human Escalation
            { source: 'VerificationAI', target: 'SalesAI', name: 'Escalates Failure' },
            { source: 'SalesAI', target: 'Judiciary', name: 'Files Case' },
        ]
    };

    const Graph = ForceGraph3D()
        (document.getElementById('3d-graph'))
        .graphData(graphData)
        .nodeLabel('name')
        .nodeAutoColorBy('group')
        .linkDirectionalArrowLength(3.5)
        .linkDirectionalArrowRelPos(1)
        .linkCurvature(0.25)
        .onNodeClick(node => {
            const infoBox = document.getElementById('info-box');
            let content = `<h2>${node.name}</h2><p>${node.description}</p>`;
            if (node.details) {
                content += `<p><strong>Details:</strong> ${node.details}</p>`;
            }
            if (node.failure) {
                content += `<p style="color: #ff8a80;"><strong>LOGICAL FAILURE:</strong> ${node.failure}</p>`;
            }
            infoBox.innerHTML = content;
            infoBox.style.display = 'block';
        });

    // Spread nodes a bit more
    Graph.d3Force('charge').strength(-120);

</script>
</body>
</html>
